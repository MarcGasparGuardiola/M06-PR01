import{User}from"../User";import swal from"sweetalert";var forms=document.querySelector(".needs-validation"),fullName=document.getElementById("fullName"),userName=document.getElementById("userName"),email=document.getElementById("validationEmail"),submit=document.getElementById("submit"),password=document.getElementById("password"),users=[],regex={userName:/^[A-Za-z ]+$/,email:/^\w+([\.\+\-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,4})+$/,password:/^[A-Za-z0-9]{5,}$/};function isUserName(e){return regex.userName.test(e)}function isEmail(e){return regex.email.test(e)}function isPassword(e){return regex.password.test(e)}function setGreen(e){e.className="form-control is-valid"}function setRed(e){e.className="form-control is-invalid"}function validateAll(e,s,t){return!!(isUserName(e.value)&&isEmail(s.value)&&isPassword(t.value))}function postRequest(){fetch("https://jsonplaceholder.typicode.com/users",{method:"POST",body:JSON.stringify({name:fullName.value,username:userName.value,email:email.value}),headers:{"Content-type":"application/json; charset=UTF-8"}}).then((function(e){return e.json()})).then((function(e){return console.log(e)}))}function getRequest(){fetch("https://jsonplaceholder.typicode.com/users").then((function(e){return e.json()})).then((function(e){return console.log(e)}))}forms.addEventListener("keyup",(function(e){switch(e.target){case userName:case fullName:isUserName(e.target.value)?setGreen(e.target):setRed(e.target);break;case email:isEmail(e.target.value)?setGreen(e.target):setRed(e.target);break;case password:isPassword(e.target.value)?setGreen(e.target):setRed(e.target)}})),isUserName(userName)&&isEmail(email)&&isPassword(password)&&console.log("holas"),submit.addEventListener("click",(function(e){if(validateAll(userName,email,password)){postRequest(),getRequest();var s=new User(userName.value,fullName.value,email.value,password.value);users.push(s),console.log(users),sessionStorage.setItem("usersArray",JSON.stringify(users)),window.location.href="../../teams.html"}else swal("Comprueba todos los datos");e.preventDefault()}));